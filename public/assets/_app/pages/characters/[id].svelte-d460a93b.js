import{S as t,i as e,s as n,e as a,t as r,k as c,c as o,a as i,g as s,d as u,n as h,f as l,F as f,J as d,h as v,G as p,K as y}from"../../chunks/vendor-1d7c8bad.js";function m(t){let e,n,m,w,E,x,k,C,T,j,$,L,P,b,D,U,g,N,O=t[0].name+"",B=t[0].level+"",H=t[0].created+"";return{c(){e=a("h1"),n=r(O),m=c(),w=a("p"),E=r("Level "),x=r(B),k=c(),C=a("p"),T=r("Created on "),j=r(H),$=c(),L=a("button"),P=r("Level Up!"),b=c(),D=a("button"),U=r("Delete this Character")},l(t){e=o(t,"H1",{});var a=i(e);n=s(a,O),a.forEach(u),m=h(t),w=o(t,"P",{});var r=i(w);E=s(r,"Level "),x=s(r,B),r.forEach(u),k=h(t),C=o(t,"P",{});var c=i(C);T=s(c,"Created on "),j=s(c,H),c.forEach(u),$=h(t),L=o(t,"BUTTON",{});var l=i(L);P=s(l,"Level Up!"),l.forEach(u),b=h(t),D=o(t,"BUTTON",{});var f=i(D);U=s(f,"Delete this Character"),f.forEach(u)},m(a,r){l(a,e,r),f(e,n),l(a,m,r),l(a,w,r),f(w,E),f(w,x),l(a,k,r),l(a,C,r),f(C,T),f(C,j),l(a,$,r),l(a,L,r),f(L,P),l(a,b,r),l(a,D,r),f(D,U),g||(N=[d(L,"click",t[1]),d(D,"click",t[2])],g=!0)},p(t,[e]){1&e&&O!==(O=t[0].name+"")&&v(n,O),1&e&&B!==(B=t[0].level+"")&&v(x,B),1&e&&H!==(H=t[0].created+"")&&v(j,H)},i:p,o:p,d(t){t&&u(e),t&&u(m),t&&u(w),t&&u(k),t&&u(C),t&&u($),t&&u(L),t&&u(b),t&&u(D),g=!1,y(N)}}}var w=function(t,e,n,a){return new(n||(n=Promise))((function(r,c){function o(t){try{s(a.next(t))}catch(e){c(e)}}function i(t){try{s(a.throw(t))}catch(e){c(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,i)}s((a=a.apply(t,e||[])).next())}))};function E({page:t,fetch:e,session:n,context:a}){return w(this,void 0,void 0,(function*(){const n=`/characters/${t.params.id}.json`,a=yield e(n);if(a.ok){const t=yield a.json(),{character:e}=t;return{props:{character:e}}}return{status:a.status,error:new Error(`Could not load ${n}`)}}))}function x(t,e,n){var a=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(r,c){function o(t){try{s(a.next(t))}catch(e){c(e)}}function i(t){try{s(a.throw(t))}catch(e){c(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,i)}s((a=a.apply(t,e||[])).next())}))};let{character:r}=e,c=r.level;return t.$$set=t=>{"character"in t&&n(0,r=t.character)},[r,function(){return a(this,void 0,void 0,(function*(){(yield fetch(`/characters/${r.id}.json`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({level:c})})).ok&&n(0,r.level++,r)}))},function(){return a(this,void 0,void 0,(function*(){if(confirm("Do you really want to?")){(yield fetch(`/characters/${r.id}.json`,{method:"DELETE"})).ok&&location.replace("/characters")}}))}]}export default class extends t{constructor(t){super(),e(this,t,x,m,n,{character:0})}}export{E as load};
